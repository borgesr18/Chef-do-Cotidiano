(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,56293,e=>{"use strict";e.s(["ArrowLeft",()=>t],56293);let t=(0,e.i(34462).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9772,e=>{"use strict";e.s(["Textarea",()=>i]);var t=e.i(98401);e.i(79556);var r=e.i(53533);function i(e){let{className:i,...n}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",i),...n})}},77978,e=>{"use strict";e.s(["Label",()=>l],77978);var t=e.i(98401),r=e.i(79556),i=e.i(7537),n=r.forwardRef((e,r)=>(0,t.jsx)(i.Primitive.label,{...e,ref:r,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null==(r=e.onMouseDown)||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var s=e.i(53533);function l(e){let{className:r,...i}=e;return(0,t.jsx)(n,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...i})}},37755,e=>{"use strict";e.s(["useSize",()=>i]);var t=e.i(79556),r=e.i(64617);function i(e){let[i,n]=t.useState(void 0);return(0,r.useLayoutEffect)(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let r,i;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let e=s.borderBoxSize,t=Array.isArray(e)?e[0]:e;r=t.inlineSize,i=t.blockSize}else r=e.offsetWidth,i=e.offsetHeight;n({width:r,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}n(void 0)},[e]),i}},26734,e=>{"use strict";e.s(["usePrevious",()=>r]);var t=e.i(79556);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}},11300,47304,9268,34203,35877,e=>{"use strict";function t(e,t,r){if(!t.has(e))throw TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function r(e,r){var i=t(e,r,"get");return i.get?i.get.call(e):i.value}function i(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function n(e,t,r){i(e,t),t.set(e,r)}function s(e,r,i){var n=t(e,r,"set");if(n.set)n.set.call(e,i);else{if(!n.writable)throw TypeError("attempted to set read only private field");n.value=i}return i}e.s(["_",()=>r],11300),e.s(["_",()=>t],47304),e.s(["_",()=>n],34203),e.s(["_",()=>i],9268),e.s(["_",()=>s],35877)},43978,41643,e=>{"use strict";e.s(["createCollection",()=>c],43978);var t,r=e.i(11300),i=e.i(34203),n=e.i(35877),s=e.i(79556),l=e.i(94735),a=e.i(28089),o=e.i(83137),u=e.i(98401);function c(e){let t=e+"CollectionProvider",[r,i]=(0,l.createContextScope)(t),[n,c]=r(t,{collectionRef:{current:null},itemMap:new Map}),d=e=>{let{scope:t,children:r}=e,i=s.default.useRef(null),l=s.default.useRef(new Map).current;return(0,u.jsx)(n,{scope:t,itemMap:l,collectionRef:i,children:r})};d.displayName=t;let f=e+"CollectionSlot",h=(0,o.createSlot)(f),p=s.default.forwardRef((e,t)=>{let{scope:r,children:i}=e,n=c(f,r),s=(0,a.useComposedRefs)(t,n.collectionRef);return(0,u.jsx)(h,{ref:s,children:i})});p.displayName=f;let g=e+"CollectionItemSlot",m="data-radix-collection-item",v=(0,o.createSlot)(g),x=s.default.forwardRef((e,t)=>{let{scope:r,children:i,...n}=e,l=s.default.useRef(null),o=(0,a.useComposedRefs)(t,l),d=c(g,r);return s.default.useEffect(()=>(d.itemMap.set(l,{ref:l,...n}),()=>void d.itemMap.delete(l))),(0,u.jsx)(v,{...{[m]:""},ref:o,children:i})});return x.displayName=g,[{Provider:d,Slot:p,ItemSlot:x},function(t){let r=c(e+"CollectionConsumer",t);return s.default.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll("[".concat(m,"]")));return Array.from(r.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[r.collectionRef,r.itemMap])},i]}var d=new WeakMap;function f(e,t){if("at"in Array.prototype)return Array.prototype.at.call(e,t);let r=function(e,t){let r=e.length,i=h(t),n=i>=0?i:r+i;return n<0||n>=r?-1:n}(e,t);return -1===r?void 0:e[r]}function h(e){return e!=e||0===e?0:Math.trunc(e)}t=new WeakMap,(class e extends Map{set(e,i){return d.get(this)&&(this.has(e)?(0,r._)(this,t)[(0,r._)(this,t).indexOf(e)]=e:(0,r._)(this,t).push(e)),super.set(e,i),this}insert(e,i,n){let s,l=this.has(i),a=(0,r._)(this,t).length,o=h(e),u=o>=0?o:a+o,c=u<0||u>=a?-1:u;if(c===this.size||l&&c===this.size-1||-1===c)return this.set(i,n),this;let d=this.size+ +!l;o<0&&u++;let f=[...(0,r._)(this,t)],p=!1;for(let e=u;e<d;e++)if(u===e){let t=f[e];f[e]===i&&(t=f[e+1]),l&&this.delete(i),s=this.get(t),this.set(i,n)}else{p||f[e-1]!==i||(p=!0);let t=f[p?e:e-1],r=s;s=this.get(t),this.delete(t),this.set(t,r)}return this}with(t,r,i){let n=new e(this);return n.insert(t,r,i),n}before(e){let i=(0,r._)(this,t).indexOf(e)-1;if(!(i<0))return this.entryAt(i)}setBefore(e,i,n){let s=(0,r._)(this,t).indexOf(e);return -1===s?this:this.insert(s,i,n)}after(e){let i=(0,r._)(this,t).indexOf(e);if(-1!==(i=-1===i||i===this.size-1?-1:i+1))return this.entryAt(i)}setAfter(e,i,n){let s=(0,r._)(this,t).indexOf(e);return -1===s?this:this.insert(s+1,i,n)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return(0,n._)(this,t,[]),super.clear()}delete(e){let i=super.delete(e);return i&&(0,r._)(this,t).splice((0,r._)(this,t).indexOf(e),1),i}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let i=f((0,r._)(this,t),e);if(void 0!==i)return this.get(i)}entryAt(e){let i=f((0,r._)(this,t),e);if(void 0!==i)return[i,this.get(i)]}indexOf(e){return(0,r._)(this,t).indexOf(e)}keyAt(e){return f((0,r._)(this,t),e)}from(e,t){let r=this.indexOf(e);if(-1===r)return;let i=r+t;return i<0&&(i=0),i>=this.size&&(i=this.size-1),this.at(i)}keyFrom(e,t){let r=this.indexOf(e);if(-1===r)return;let i=r+t;return i<0&&(i=0),i>=this.size&&(i=this.size-1),this.keyAt(i)}find(e,t){let r=0;for(let i of this){if(Reflect.apply(e,t,[i,r,this]))return i;r++}}findIndex(e,t){let r=0;for(let i of this){if(Reflect.apply(e,t,[i,r,this]))return r;r++}return -1}filter(t,r){let i=[],n=0;for(let e of this)Reflect.apply(t,r,[e,n,this])&&i.push(e),n++;return new e(i)}map(t,r){let i=[],n=0;for(let e of this)i.push([e[0],Reflect.apply(t,r,[e,n,this])]),n++;return new e(i)}reduce(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[i,n]=t,s=0,l=null!=n?n:this.at(0);for(let e of this)l=0===s&&1===t.length?e:Reflect.apply(i,this,[l,e,s,this]),s++;return l}reduceRight(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let[i,n]=t,s=null!=n?n:this.at(-1);for(let e=this.size-1;e>=0;e--){let r=this.at(e);s=e===this.size-1&&1===t.length?r:Reflect.apply(i,this,[s,r,e,this])}return s}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let r=this.keyAt(e),i=this.get(r);t.set(r,i)}return t}toSpliced(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];let n=[...this.entries()];return n.splice(...r),new e(n)}slice(t,r){let i=new e,n=this.size-1;if(void 0===t)return i;t<0&&(t+=this.size),void 0!==r&&r>0&&(n=r-1);for(let e=t;e<=n;e++){let t=this.keyAt(e),r=this.get(t);i.set(t,r)}return i}every(e,t){let r=0;for(let i of this){if(!Reflect.apply(e,t,[i,r,this]))return!1;r++}return!0}some(e,t){let r=0;for(let i of this){if(Reflect.apply(e,t,[i,r,this]))return!0;r++}return!1}constructor(e){super(e),(0,i._)(this,t,{writable:!0,value:void 0}),(0,n._)(this,t,[...super.keys()]),d.set(this,!0)}}),e.s(["useDirection",()=>g],41643);var p=s.createContext(void 0);function g(e){let t=s.useContext(p);return e||t||"ltr"}},95112,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},26319,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return i}});let i=e.r(95112)._(e.r(79556)).default.createContext({})},2492,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},87602,(e,t,r)=>{"use strict";function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var a=s?Object.getOwnPropertyDescriptor(e,l):null;a&&(a.get||a.set)?Object.defineProperty(n,l,a):n[l]=e[l]}return n.default=e,r&&r.set(e,n),n}},46996,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(r,{DecodeError:function(){return g},MiddlewareNotFoundError:function(){return y},MissingStaticPage:function(){return x},NormalizeError:function(){return m},PageNotFoundError:function(){return v},SP:function(){return h},ST:function(){return p},WEB_VITALS:function(){return i},execOnce:function(){return n},getDisplayName:function(){return u},getLocationOrigin:function(){return a},getURL:function(){return o},isAbsoluteUrl:function(){return l},isResSent:function(){return c},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return d},stringifyError:function(){return b}});let i=["CLS","FCP","FID","INP","LCP","TTFB"];function n(e){let t,r=!1;return function(){for(var i=arguments.length,n=Array(i),s=0;s<i;s++)n[s]=arguments[s];return r||(r=!0,t=e(...n)),t}}let s=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>s.test(e);function a(){let{protocol:e,hostname:t,port:r}=window.location;return e+"//"+t+(r?":"+r:"")}function o(){let{href:e}=window.location,t=a();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function c(e){return e.finished||e.headersSent}function d(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?"?"+t.slice(1).join("?"):"")}async function f(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let i=await e.getInitialProps(t);if(r&&c(r))return i;if(!i)throw Object.defineProperty(Error('"'+u(e)+'.getInitialProps()" should resolve to an object. But found "'+i+'" instead.'),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i}let h="undefined"!=typeof performance,p=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class m extends Error{}class v extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message="Cannot find module for page: "+e}}class x extends Error{constructor(e,t){super(),this.message="Failed to load static file for page: "+e+" "+t}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function b(e){return JSON.stringify({message:e.message,stack:e.stack})}},51837,e=>{"use strict";e.s(["EbookForm",()=>g,"default",()=>m],51837);var t=e.i(98401),r=e.i(79556),i=e.i(58984),n=e.i(68022),s=e.i(16752),l=e.i(2481),a=e.i(77978),o=e.i(9772),u=e.i(76264),c=e.i(9621),d=e.i(256),f=e.i(53533),h=e.i(56293);let p=(0,e.i(34462).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),g=()=>{let e=(0,i.useNavigate)(),{id:g}=(0,i.useParams)(),m=!!g,[v,x]=(0,r.useState)({title:"",slug:"",description:"",price:"",pages:"",cover_image:"",file_url:"",status:"draft",category_id:null}),[y,b]=(0,r.useState)([]),[j,_]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{let{data:e}=await d.categories.getAllForAdmin();if(b(e||[]),m){let{data:e}=await d.ebooks.getById(g);e&&x({title:e.title||"",slug:e.slug||"",description:e.description||"",price:e.price||"",pages:e.pages||"",cover_image:e.cover_image||"",file_url:e.file_url||"",status:e.status||"draft",category_id:e.category_id||null})}S(!1)})()},[g,m]);let C=(e,t)=>{x(r=>({...r,[e]:t}))},P=async e=>{if(!e)return;let t=e.name.split(".").pop(),r="".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2),".").concat(t),i="ebooks/".concat(r),{error:n}=await c.supabase.storage.from("images").upload(i,e);if(!n){let{data:{publicUrl:e}}=c.supabase.storage.from("images").getPublicUrl(i);C("cover_image",e)}},N=async t=>{t.preventDefault(),_(!0);try{let t={...v,price:Number(v.price||0),pages:v.pages?Number(v.pages):null};if(m){let{error:e}=await d.ebooks.update(g,t);if(e)throw e}else{let{error:e}=await d.ebooks.create(t);if(e)throw e}e("/admin/ebooks")}catch(e){}finally{_(!1)}};return w?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):(0,t.jsxs)("div",{className:"p-6 max-w-4xl",children:[(0,t.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(s.Button,{variant:"outline",onClick:()=>e(-1),children:[(0,t.jsx)(h.ArrowLeft,{className:"w-4 h-4 mr-2"})," Voltar"]}),(0,t.jsx)("h1",{className:"text-2xl font-bold",children:m?"Editar E-book":"Novo E-book"})]})}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(n.CardHeader,{children:(0,t.jsx)(n.CardTitle,{children:"Informações do E-book"})}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"title",children:"Título"}),(0,t.jsx)(l.Input,{id:"title",value:v.title,onChange:e=>(e=>{C("title",e),C("slug",(0,f.generateSlug)(e))})(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"slug",children:"Slug"}),(0,t.jsx)(l.Input,{id:"slug",value:v.slug,onChange:e=>C("slug",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"price",children:"Preço (R$)"}),(0,t.jsx)(l.Input,{id:"price",type:"number",step:"0.01",value:v.price,onChange:e=>C("price",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"pages",children:"Páginas"}),(0,t.jsx)(l.Input,{id:"pages",type:"number",value:v.pages,onChange:e=>C("pages",e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"category",children:"Categoria"}),(0,t.jsxs)(u.Select,{value:v.category_id||"",onValueChange:e=>C("category_id",e),children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Selecione uma categoria"})}),(0,t.jsx)(u.SelectContent,{children:y.map(e=>(0,t.jsx)(u.SelectItem,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"status",children:"Status"}),(0,t.jsxs)(u.Select,{value:v.status,onValueChange:e=>C("status",e),children:[(0,t.jsx)(u.SelectTrigger,{children:(0,t.jsx)(u.SelectValue,{placeholder:"Selecione o status"})}),(0,t.jsxs)(u.SelectContent,{children:[(0,t.jsx)(u.SelectItem,{value:"draft",children:"Rascunho"}),(0,t.jsx)(u.SelectItem,{value:"published",children:"Publicado"}),(0,t.jsx)(u.SelectItem,{value:"archived",children:"Arquivado"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"description",children:"Descrição"}),(0,t.jsx)(o.Textarea,{id:"description",rows:5,value:v.description,onChange:e=>C("description",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-end",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"cover",children:"Capa"}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(l.Input,{id:"cover",placeholder:"URL da imagem",value:v.cover_image,onChange:e=>C("cover_image",e.target.value)}),(0,t.jsxs)("label",{className:"inline-flex items-center px-3 py-2 border rounded-md cursor-pointer",children:[(0,t.jsx)(p,{className:"w-4 h-4 mr-2"})," Upload",(0,t.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:e=>P(e.target.files[0])})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(a.Label,{htmlFor:"file_url",children:"Arquivo (URL)"}),(0,t.jsx)(l.Input,{id:"file_url",placeholder:"URL do PDF",value:v.file_url,onChange:e=>C("file_url",e.target.value)})]})]}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)(s.Button,{type:"submit",disabled:j,children:j?"Salvando...":"Salvar E-book"})})]})})]})]})},m=g},60196,(e,t,r)=>{let i="/admin/EbookForm";(window.__NEXT_P=window.__NEXT_P||[]).push([i,()=>e.r(51837)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([i])})},53139,e=>{e.v(t=>Promise.all(["static/chunks/5ef38176653a8c76.js"].map(t=>e.l(t))).then(()=>t(15703)))},53581,e=>{e.v(t=>Promise.all(["static/chunks/ff4f04e0588a786d.js"].map(t=>e.l(t))).then(()=>t(45871)))},75749,e=>{e.v(e=>Promise.resolve().then(()=>e(65710)))}]);