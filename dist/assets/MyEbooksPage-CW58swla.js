import{j as e}from"./ui-vendor-CCxVMQ9B.js";import{r as a,L as r}from"./react-vendor-CN1YoO9o.js";import{C as b,b as u,c as j,a as f}from"./card-DDJFiqOK.js";import{b as p,B as t,a as g}from"./index-DStP_-PY.js";import{B as k}from"./badge-B80lkMBr.js";import{u as N}from"./useEbookPurchase-DtVjs3Bb.js";import{S as v}from"./SEO-BV2VGWhT.js";import{F as y}from"./file-text-DPQ1k72S.js";import"./supabase-vendor-CqT5vMLU.js";import"./utils-vendor-BTGVH9Kg.js";/**
 * @license lucide-react v0.363.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=p("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),V=()=>{const{getUserPurchases:m}=N(),[i,x]=a.useState([]),[h,l]=a.useState(!0);return a.useEffect(()=>{(async()=>{l(!0);const{data:o}=await m();x(o||[]),l(!1)})()},[]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(v,{title:"Meus E-books",description:"Acesse os e-books que você comprou.",image:"https://images.unsplash.com/photo-1507842217343-583bb7270b66?w=1200&h=630&fit=crop"}),e.jsx("section",{className:"py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Meus E-books"}),e.jsx(r,{to:"/ebooks",children:e.jsx(t,{variant:"outline",children:"Explorar e-books"})})]}),h?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx("div",{role:"status","aria-label":"Carregando",className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):i.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(y,{className:"h-16 w-16 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Você ainda não comprou nenhum e-book"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Explore nosso catálogo e comece agora mesmo."}),e.jsx(r,{to:"/ebooks",children:e.jsx(t,{children:"Ver e-books"})})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(s=>{var o,n,c,d;return e.jsxs(b,{className:"overflow-hidden",children:[e.jsx(u,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(j,{className:"text-xl",children:((o=s.ebooks)==null?void 0:o.title)||"E-book"}),e.jsx(k,{className:"bg-green-600 text-white",children:"Pago"})]})}),e.jsx(f,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Valor: R$ ",Number(s.amount||0).toFixed(2)]}),e.jsxs("div",{className:"flex gap-2",children:[((n=s.ebooks)==null?void 0:n.slug)&&e.jsx(t,{variant:"outline",asChild:!0,className:"flex-1",children:e.jsxs(r,{to:`/ebooks/${s.ebook_id}`,children:[e.jsx(g,{className:"h-4 w-4 mr-2"})," Detalhes"]})}),((c=s.ebooks)==null?void 0:c.cover_image)&&((d=s.ebooks)==null?void 0:d.file_url)&&e.jsxs("a",{className:"inline-flex items-center justify-center px-4 py-2 border rounded-md flex-1",href:s.ebooks.file_url,target:"_blank",rel:"noreferrer",children:[e.jsx(w,{className:"h-4 w-4 mr-2"})," Baixar"]})]})]})})]},s.id)})})]})})]})};export{V as default};
