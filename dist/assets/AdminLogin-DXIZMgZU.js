import{j as e}from"./ui-vendor-CCxVMQ9B.js";import{u as N,r as i,L as g}from"./react-vendor-CN1YoO9o.js";import{f as v,m as b,A as w,n as y,o as x,p as A,I as h,q as S,B as C,t as E}from"./index-DStP_-PY.js";import{C as L,b as I,c as k,a as q}from"./card-DDJFiqOK.js";import"./supabase-vendor-CqT5vMLU.js";import"./utils-vendor-BTGVH9Kg.js";const R=()=>{const n=N(),{signIn:f,hasPermission:l,isAuthenticated:m,loading:o}=v(),[t,d]=i.useState({email:"",password:""}),[c,u]=i.useState(!1),[p,r]=i.useState("");i.useEffect(()=>{m&&l("admin")&&n("/admin",{replace:!0})},[m,n,l]);const j=async a=>{a.preventDefault(),u(!0),r("");try{const{error:s}=await f(t.email,t.password);if(s){r(s.message);return}if(!l("admin")){r("Sua conta não possui permissão de administrador.");return}n("/admin",{replace:!0})}catch{r("Erro inesperado. Tente novamente.")}finally{u(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(L,{className:"w-full max-w-md",children:[e.jsx(I,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"h-5 w-5 text-primary"})," Acesso Administrativo"]})}),e.jsxs(q,{children:[p&&e.jsx(w,{variant:"destructive",className:"mb-4",children:e.jsx(y,{children:p})}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"admin-email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(h,{id:"admin-email",type:"email",placeholder:"admin@exemplo.com",value:t.email,onChange:a=>d(s=>({...s,email:a.target.value})),className:"pl-10",required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"admin-password",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground h-4 w-4"}),e.jsx(h,{id:"admin-password",type:"password",placeholder:"Sua senha de administrador",value:t.password,onChange:a=>d(s=>({...s,password:a.target.value})),className:"pl-10",required:!0})]})]}),e.jsxs(C,{type:"submit",className:"w-full",disabled:c||o,children:[(c||o)&&e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Entrar como Admin"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-4",children:["Somente contas com papel ",e.jsx("span",{className:"font-semibold",children:"admin"})," ou ",e.jsx("span",{className:"font-semibold",children:"super_admin"})," terão acesso."]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(g,{to:"/",className:"text-sm text-primary hover:underline",children:"Voltar para o site"})})]})]})})};export{R as AdminLogin,R as default};
