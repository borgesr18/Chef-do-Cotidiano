import{j as e}from"./ui-vendor-CCxVMQ9B.js";import{r as l}from"./react-vendor-CN1YoO9o.js";import{C as r,b as i,c,a as d}from"./card-DDJFiqOK.js";import{C as u,a as N,E as f,l as b,r as v}from"./index-DStP_-PY.js";import{U as y}from"./users-jO4XmtX7.js";import{T as m}from"./trending-up-CiRWmbOr.js";import{C}from"./clock-Wc9Bu7ld.js";import"./supabase-vendor-CqT5vMLU.js";import"./utils-vendor-BTGVH9Kg.js";const V=()=>{const[t,h]=l.useState({totalRecipes:0,totalUsers:0,totalCourses:0,totalViews:0}),[o,g]=l.useState([]),[n,p]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const[a,x]=await Promise.all([b.getDashboardStats(),v.getPublished(5,0)]);a.data&&h(a.data),x.data&&g(x.data)}catch(a){console.error("Error fetching dashboard data:",a)}finally{p(!1)}})()},[]);const j=[{title:"Total de Receitas",value:t.totalRecipes,icon:u,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"Usuários Registrados",value:t.totalUsers,icon:y,color:"text-green-600",bgColor:"bg-green-50"},{title:"Cursos Ativos",value:t.totalCourses,icon:N,color:"text-purple-600",bgColor:"bg-purple-50"},{title:"Visualizações Totais",value:t.totalViews,icon:f,color:"text-orange-600",bgColor:"bg-orange-50"}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Administrativo"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Visão geral do sistema Chef do Cotidiano"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:j.map(s=>e.jsxs(r,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(c,{className:"text-sm font-medium text-gray-600",children:s.title}),e.jsx("div",{className:`p-2 rounded-lg ${s.bgColor}`,children:e.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})})]}),e.jsxs(d,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n?"...":s.value.toLocaleString()}),e.jsxs("div",{className:"flex items-center mt-2 text-sm text-green-600",children:[e.jsx(m,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:"+12% este mês"})]})]})]},s.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center",children:[e.jsx(C,{className:"h-5 w-5 mr-2"}),"Receitas Recentes"]})}),e.jsx(d,{children:n?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((s,a)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},a))}):o.length>0?e.jsx("div",{className:"space-y-4",children:o.map(s=>{var a;return e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50",children:[e.jsx("img",{src:s.image_url||"/placeholder-recipe.jpg",alt:s.title,className:"w-12 h-12 rounded-lg object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:s.title}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Por ",((a=s.profiles)==null?void 0:a.full_name)||"Autor desconhecido"]})]}),e.jsx("div",{className:"text-xs text-gray-400",children:new Date(s.created_at).toLocaleDateString("pt-BR")})]},s.id)})}):e.jsx("p",{className:"text-gray-500 text-center py-4",children:"Nenhuma receita encontrada"})})]}),e.jsxs(r,{children:[e.jsx(i,{children:e.jsxs(c,{className:"flex items-center",children:[e.jsx(m,{className:"h-5 w-5 mr-2"}),"Atividade Recente"]})}),e.jsx(d,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-blue-50",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Nova receita publicada"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Há 2 horas"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-green-50",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Novo usuário registrado"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Há 4 horas"})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-purple-50",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Curso atualizado"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Há 1 dia"})]})]})]})})]})]})]})};export{V as AdminDashboard};
